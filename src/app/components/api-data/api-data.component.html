<div class="container mx-auto mt-8">
  <h1 class="text-3xl font-bold mb-6 text-center">API Data</h1>
  <form
    [formGroup]="apiForm"
    (ngSubmit)="fetchData()"
    class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md"
  >
    <div class="mb-4">
      <label for="title" class="block text-gray-700 font-bold mb-2"
        >Title</label
      >
      <input
        type="text"
        class="form-control block w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        id="title"
        placeholder="Title"
        formControlName="title"
        [ngClass]="{
          'border-red-500':
            getControl().title.errors && getControl().title.touched
        }"
      />
      <div
        *ngIf="getControl().title.errors && getControl().title.touched"
        class="mt-1 text-red-500 text-sm"
      >
        <small *ngIf="getControl().title.errors?.['required']"
          >Title is required</small
        >
        <small *ngIf="getControl().title.errors?.['minlength']"
          >Please enter more than two letters in title</small
        >
      </div>
    </div>

    <div class="mb-4">
      <label for="year" class="block text-gray-700 font-bold mb-2">Year</label>
      <input
        type="text"
        class="form-control block w-full p-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        id="year"
        placeholder="Year"
        formControlName="year"
        [ngClass]="{
          'border-red-500':
            getControl().year.errors && getControl().year.touched
        }"
      />
      <div
        *ngIf="getControl().year.errors && getControl().year.touched"
        class="mt-1 text-red-500 text-sm"
      >
        <small *ngIf="getControl().year.errors?.['required']"
          >Year is required</small
        >
        <small *ngIf="getControl().year.errors?.['minlength']"
          >Please enter a valid year</small
        >
      </div>
    </div>

    <button
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full"
      type="submit"
    >
      Fetch Data
    </button>

    <div *ngIf="data" class="mt-8">
      <div class="max-w-md rounded overflow-hidden shadow-lg mx-auto">
        <img class="w-full" src="{{ data.Poster }}" alt="Movie Poster" />
        <div class="px-6 py-4">
          <div class="font-bold text-xl mb-2">{{ data.Title }}</div>
          <p class="text-gray-700 text-base">
            {{ data.Plot }}
          </p>
        </div>
        <div class="px-6 pt-4 pb-2">
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Year: {{ data.Year }}</span
          >
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Rated: {{ data.Rated }}</span
          >
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Released: {{ data.Released }}</span
          >
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Genre: {{ data.Genre }}</span
          >
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Director: {{ data.Director }}</span
          >
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Actors: {{ data.Actors }}</span
          >
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Plot: {{ data.Plot }}</span
          >
          <span
            class="block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mb-2"
            >Awards: {{ data.Awards }}</span
          >
        </div>
      </div>
    </div>
  </form>
</div>
